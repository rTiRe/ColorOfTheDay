# Риски



| Риск                                                                           | Описание                                                                                                 | Вероятность | Критичность | Митигация                                                                                                                                                                               |
| ------------------------------------------------------------------------------ | -------------------------------------------------------------------------------------------------------- | ----------- | ----------- | --------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| **1. Сбой в сервисе авторизации**                                              | Пользователи не могут войти в систему, что делает невозможным доступ к цвету дня и подписочным функциям. | 2           | 5           | Настроить автоматический health-check, иметь fallback-страницу “сервис недоступен, но цвет дня остаётся в ваших сердцах”, иметь реплики сервиса (невозможно при текущем финансировании) |
| &#x32;**. Ошибка в оплате подписки: деньги списаны, но подписка не обновлёна** | Пользователь заплатил, но система считает его обычным “цветохлебом”, без доступа к архиву цветов.        | 2           | 5           | Использовать транзакционность и идемпотентные операции, добавлять отложенную верификацию платежа.                                                                                       |
| &#x33;**. Ошибка кошелька: оплата прошла, но событие потеряно**                | Платёжная система отправила уведомление, но сервис его не получил из-за временного сбоя.                 | 3           | 4           | Хранить события в очереди (RabbitMQ / Kafka).                                                                                                                                           |
| &#x34;**. Некорректное продление подписки**                                    | Автоматическое продление не срабатывает, подписка истекает раньше времени.                               | 2           | 4           | Создать задачу-прослойку (cron/APScheduler/Celery), которая сверяет статусы раз в N часов.                                                                                              |
| &#x35;**. Утечка токена авторизации**                                          | Злоумышленник получает доступ к аккаунту и может менять настройки или смотреть цвет по датам в архиве.   | 1           | 5           | Ограничение жизни токена, ревокация при подозрительных активностях, обязательный refresh-flow.                                                                                          |
| &#x36;**. Сбой при проверке подписки**                                         | Сервис подписок временно лежит, поэтому никто не получает доступ.                                        | 3           | 3           | Ввести локальный кэш статуса подписки, fallback-режим “доверять последнему состоянию”.                                                                                                  |
| &#x37;**. Частичная потеря истории цветов**                                    | База данных повреждена, отсутствуют записи за часть дней, премиум-пользователи жалуются.                 | 1           | 4           | Регулярные бэкапы (проверенные!), система репликации, дополнительное хранение в cold storage. (невозможно при текущем финансировании)                                                   |
| &#x38;**. Случайное использование администратором эндпоинта POST /color/set**  | Администратор случайно использует эндпоинт и меняет цвет дня, что приводит мир в хаос.                   | 2           | 3           | Быть внимательнее, не подпускать кого попало, не выдавать себе роль "Светозар всемогущий"                                                                                               |

