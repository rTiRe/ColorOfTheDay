---
description: Tech Design Review
---

# TDR

## **Проблема**

Каждый день миллионы пользователей просыпаются без чёткого понимания, какой цвет сегодня считать правильным. Кто-то идёт в красном, кто-то — в синем, кто-то даже в фиолетовом (и живёт с этим). Мир погружается в хаос: небо кажется синим, квадроберы одевают разные хвосты, расклады таро перестают сбываться, а кассиры в магазинах дают неправильную сдачу (по внутренним исследованиям, в 0.00001% случаев).

Отсутствие единого "Цвета дня" приводит к:

* ухудшению кармы
* снижению оптимизма на 3–5 единиц по шкале “ну такое”
* неопределённости при выборе носков
* повышению количества мемов “какой ты сегодня цвет?” в соцсетях

Если проблему игнорировать, человечество столкнётся с тотальной разрозненностью оттенков уже к 2035 году. Это недопустимо.

## **Цель**

* Ввести ежедневный цветовой порядок и гармонию.
* Повысить коллективный эстетический тонус пользователей.

## **Решение**

Создать сервис, который каждый день будет сообщать цвет сегодняшнего дня, выбирая его в начале каждых суток по строго научно-мистическому алгоритму.

## **Какие ещё проблемы решает**

* Люди больше не будут спорить, “какой цвет сегодня в моде”.
* Улучшает настроение (на уровне плацебо).
* Спасает проект от скучной архитектуры: ведь теперь у нас есть сервис, который делает абсолютно волшебную чепуху по расписанию.

## **Требования**

### **Функциональные**

1. **Генерация цвета дня**
   * Раз в сутки генерируется цвет в формате HEX (например, #FF00FF).
   * Алгоритм должен обладать интеллектом, основанном на научно доказанном рандоме
2. **Хранение истории цветов**
   * API позволяет запросить цвет за любую дату.
   * Хранение последних 365 дней.
3. **Эндпоинты**
   * `GET /color/today` — получить сегодняшний цвет.
   * `GET /color/{date}` — получить цвет по дате (доступно только подписчикам уровня "Цветозар обыкновенный").
   * `POST /color/set` — принудительно установить цвет дня (доступно только подписчикам уровня “Цветозар всемогущий”, которых никогда не будет, но эндпоинт есть).
4. **Интеграция с другими сервисами**
   * Проверка подписки (через сервис подписки) для премиум-функций.
   * Идентификация пользователя (через авторизацию).

### **Нефункциональные**

* **Производительность**: Ответ на запрос должен приходить быстрее, чем человек может решить, какой цвет надеть (≈800 мс).
* **Надёжность**: 99% аптайм. Сервис должен быть устойчив к наплывам запросов по утрам, когда никто не знает что надеть.
* **Масштабируемость**: Возможность обслуживать до 10000 любителей цветов одновременно.

## **Компромиссы**

1. **Минимум данных vs. Максимум истории**
   * Хранить все цвета с момента запуска сервиса удобно для любителей статистики, но сильно нагружает базу.
   * Решение: хранить только последние 365 дней, но при желании предоставлять экспорт истории за дополнительную плату.
2. **Производительность vs. Визуальная сложность**
   * Цвет генерируется быстро, но сложные градиенты или оттенки могут замедлить ответ.
   * Решение: генерация HEX для API, но не запрещать использовать небольшие количества других цветов в течении дня для подчеркивания индивидуальности.
3. **Алгоритмическая строгость vs. Магический хаос**
   * Цвет должен подчиняться мистическому алгоритму, но иногда хочется, чтобы он просто “чувствовался правильным”.
   * Решение: 90% цветов выбираются по алгоритму, 10% — чисто интуитивно, для сюрприза.

## **Альтернативы**

1. **Сервис “Номер дня”** — Отклонено, так как у подопытных развивалась лудомания.
2. **Сервис “Шутка дня”** — Отклонено из-за возможных различий в чувстве юмора между поколениями.
3. **Сервис “Рандомный совет”** — Отклонено из-за большого количества полезности на каждый бит данных.
